---
import { portfolioData } from "../data/portfolio";
---

<section
    class="bg-zinc-900 flex items-center justify-center overflow-visible relative hero"
>
    <div class="circle">
        <div class="circle1"></div>
        <div class="circle2"></div>
    </div>

    <div
        class="container mx-auto max-w-5xl flex flex-col md:flex-row gap-20 items-center z-10 justify-center hero-inner"
    >
        <!-- Left side: Text -->
        <div class="text-white w-full md:w-auto">
            <h1
                class="text-xl font-bold italic mb-6 drop-shadow-lg varela-font"
            >
                Hey there!
                <br />
                I'm
                <span class="typed-text text-3xl"></span>
                <span class="cursor">|</span>
            </h1>
            <p
                class="text-lg font-bold italic leading-relaxed drop-shadow-lg varela-font"
            >
                {portfolioData.tagline}
            </p>
        </div>

        <!-- Right side: Image -->
        <div class="flex justify-center shrink-0">
            <img
                src={portfolioData.personalImage}
                alt={portfolioData.name}
                class="rounded-3xl shadow-2xl hero-image"
                loading="eager"
            />
        </div>
    </div>
</section>

<script define:vars={{ portfolioData }}>
    const typedElement = document.querySelector(".typed-text");

    if (!typedElement) return;

    const phrases = portfolioData.typeTextPhrases;

    if (!Array.isArray(phrases) || phrases.length === 0) {
        typedElement.textContent = portfolioData.name;
        return;
    }

    if (window.matchMedia("(prefers-reduced-motion: reduce)").matches) {
        typedElement.textContent = phrases[0];
        return;
    }

    const TYPING_SPEED = 60;
    const DELETING_SPEED = 35;
    const PAUSE_AFTER_TYPE = 1500;

    let phraseIndex = 0;
    let charIndex = 0;
    let isDeleting = false;

    function type() {
        const currentPhrase = phrases[phraseIndex];
        typedElement.textContent = currentPhrase.slice(0, charIndex);

        if (!isDeleting && charIndex === currentPhrase.length) {
            isDeleting = true;
            setTimeout(type, PAUSE_AFTER_TYPE);
            return;
        }

        if (isDeleting && charIndex === 0) {
            isDeleting = false;
            phraseIndex = (phraseIndex + 1) % phrases.length;
        }

        charIndex += isDeleting ? -1 : 1;

        setTimeout(type, isDeleting ? DELETING_SPEED : TYPING_SPEED);
    }

    type();
</script>
