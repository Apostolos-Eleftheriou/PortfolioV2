---
import { portfolioData } from "../data/portfolio";
---

<section
    class="bg-zinc-900 flex items-center justify-center overflow-visible relative hero"
>
    <div class="circle">
        <div class="circle1"></div>
        <div class="circle2"></div>
    </div>

    <div
        class="container mx-auto max-w-5xl flex flex-col md:flex-row gap-20 items-center z-10 justify-center"
        style="position: relative; padding: 140px 30px 100px 30px;"
    >
        <!-- Left side: Text -->
        <div class="text-white w-full md:w-auto">
            <h1
                class="text-xl font-bold italic mb-6 drop-shadow-lg"
                style="font-family: 'Varela Round', sans-serif; font-size: 21px;"
            >
                Hey there!
                <br />
                I'm
                <span class="typed-text text-3xl"> Apostolis. </span>
            </h1>
            <p
                class="text-lg font-bold italic leading-relaxed drop-shadow-lg"
                style="font-family: 'Varela Round', sans-serif; font-size: 18px; line-height: 30px;"
            >
                {portfolioData.tagline}
            </p>
        </div>

        <!-- Right side: Image -->
        <div class="flex justify-center shrink-0">
            <img
                src={portfolioData.personalImage}
                alt={portfolioData.name}
                class="rounded-3xl shadow-2xl hero-image"
                loading="lazy"
            />
        </div>
    </div>
</section>

<script define:vars={{ portfolioData }}>
    const typedElement = document.querySelector(".typed-text");
    if (typedElement) {
        const phrases = portfolioData.typeTextPhrases;
        let phraseIndex = 0;
        let charIndex = 0;
        let isDeleting = false;

        function type() {
            const currentPhrase = phrases[phraseIndex];
            const typedChar = isDeleting
                ? currentPhrase.substring(0, charIndex - 1)
                : currentPhrase.substring(0, charIndex + 1);

            typedElement.textContent = typedChar;

            if (!isDeleting && charIndex === currentPhrase.length) {
                isDeleting = true;
                setTimeout(type, 1500);
                return;
            }

            if (isDeleting && charIndex === 0) {
                isDeleting = false;
                phraseIndex = (phraseIndex + 1) % phrases.length;
            }

            if (isDeleting) {
                charIndex--;
            } else {
                charIndex++;
            }

            setTimeout(type, isDeleting ? 30 : 50);
        }

        type();
    }
</script>
